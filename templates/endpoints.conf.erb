<% @endpoints.each do | config_name, configs | %>
frontend <%= configs[:name] %>
    bind <%= configs[:listen_ip] %>:<%= configs[:listen_port] %>
    default_backend <%= configs[:backend_name] %>

backend <%= configs[:backend_name] %>
    balance     roundrobin
    <% configs[:backends].each do | server, server_info | %>
        server <%= server_info[:server_name] %> <%= server_info[:server_address] %>:<%= server_info[:server_port] %> <%= server_info[:extra_params] %>
    <% end %>
<% end %>
